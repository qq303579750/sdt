define("arale/popup/1.0.2/popup",["$","arale/overlay/1.0.1/overlay","arale/position/1.0.0/position","arale/iframe-shim/1.0.1/iframe-shim","arale/widget/1.0.3/widget","arale/base/1.0.1/base","arale/class/1.0.0/class","arale/events/1.0.0/events"],function(e,t,i){function n(e,t,i,n){n&&n[0]?n.on(e,t.selector,function(e){i.call(this,e)}):t.on(e,function(e){i.call(this,e)})}var s=e("$"),o=e("arale/overlay/1.0.1/overlay"),r=o.extend({attrs:{trigger:{value:null,getter:function(e){return s(e)}},triggerType:"hover",delegateNode:{value:null,getter:function(e){return s(e)}},align:{value:{baseXY:[0,"100%"],selfXY:[0,0]},setter:function(e){return e?(e.baseElement?this._specifiedBaseElement=!0:this.activeTrigger&&(e.baseElement=this.activeTrigger),e):void 0},getter:function(e){return s.extend({},e,this._specifiedBaseElement?{}:{baseElement:this.activeTrigger})}},delay:70,disabled:!1,effect:"",duration:250},setup:function(){r.superclass.setup.call(this),this._bindTrigger(),this._blurHide(this.get("trigger")),this.activeTrigger=this.get("trigger").eq(0)},show:function(){return this.get("disabled")?void 0:r.superclass.show.call(this)},_bindTrigger:function(){var e=this.get("triggerType");"click"===e?this._bindClick():"focus"===e?this._bindFocus():this._bindHover()},_bindClick:function(){function e(e){t.get("disabled")||t.get("trigger").each(function(i,n){e==n?(n._active=!0,t.activeTrigger=s(n)):n._active=!1})}var t=this;n("click",this.get("trigger"),function(i){i.preventDefault(),this._active===!0?t.hide():(e(this),t.show())}),this.get("delegateNode"),this.before("hide",function(){e()})},_bindFocus:function(){var e=this;n("focus",this.get("trigger"),function(){e.activeTrigger=s(this),e.show()}),this.get("delegateNode"),n("blur",this.get("trigger"),function(){setTimeout(function(){!e._downOnElement&&e.hide(),e._downOnElement=!1},e.get("delay"))}),this.get("delegateNode"),this.element.on("mousedown",function(){e._downOnElement=!0})},_bindHover:function(){function e(){clearTimeout(t),t=null,l.get("visible")&&(i=setTimeout(function(){l.hide()},a))}var t,i,o=this.get("trigger"),r=this.get("delegateNode"),a=this.get("delay"),l=this;return 0>a?(this._bindTooltip(),void 0):(n("mouseover",o,function(){clearTimeout(i),i=null,l.activeTrigger=s(this),t=setTimeout(function(){l.show()},a)},r),n("mouseout",o,e,r),this.element.hover(function(){clearTimeout(i)},e),void 0)},_bindTooltip:function(){var e=this.get("trigger"),t=this.get("delegateNode"),i=this;n("mouseover",e,function(){i.activeTrigger=s(this),i.show()},t),n("mouseout",e,function(){i.hide()},t)},_onRenderVisible:function(e){var t=-1!==this.get("effect").indexOf("fade"),i=-1!==this.get("effect").indexOf("slide"),n={};i&&(n.height=e?"show":"hide"),t&&(n.opacity=e?"show":"hide"),t||i?this.element.stop(!0,!0).animate(n,this.get("duration")).css({visibility:"visible"}):this.element[e?"show":"hide"]()}});i.exports=r});
